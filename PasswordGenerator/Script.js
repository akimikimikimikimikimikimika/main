(()=>{let ce=t=>document.createElement(t),cd=(i,c,t)=>{let e=ce("div");if (i) e.id=i;if (c) e.className=c;if (t) e.textContent=t;return e;},cs=(c,t)=>{let e=ce("span");if (c) e.className=c;if (t) e.textContent=t;return e;},ap=(p,c)=>p.appendChild(c),apd=(p,i,c,t)=>ap(p,cd(i,c,t)),sa=(n,k,v)=>{n.setAttribute(k,v);return n;},ra=(n,k)=>{n.removeAttribute(k);return n;},rm=c=>c.parentNode.removeChild(c),ael=(e,t,l,o)=>e.addEventListener(t,l,o);let touch=cd().ontouchstart===null;let sim=3;var avail=false,plist=[],pending=null;for (var n=0;n<sim;n++) plist.push(["",""]);let changeChars=()=>{let p=["",""];([[upc,lwc],[num,sym]]).forEach((e1,m)=>{e1.forEach(e=>{for (var n=0;n<e.length;n++) if (e[n].selected) p[m]+=e[n].text;});});for (var n=0;n<plist.length;n++) {plist[n][0]=p[0];plist[n][1]=p[1];}avail=false;setTimeout(()=>{avail=true;if (pending) {pending();pending=null;}},3000);};plist.forEach(e=>{let g=()=>{setTimeout(f,Math.floor(Math.random()*1000));};let f=()=>{for (var m=0;m<2;m++) {let b=e[m].split("");var a="";while (b.length) {let r=Math.floor(Math.random()*b.length);a+=b[r];b.splice(r,1);}e[m]=a;}g();};});let generate=()=>{let ab=/^([a-zA-Z]+)/,num=/^([0-9]+)/,sym=/^([^a-zA-Z0-9]+)/;let f=()=>{with (pw) while (firstChild) removeChild(firstChild);let f=()=>{var r="";let po=plist[Math.floor(Math.random()*plist.length)];let p=[[],[]];let supply=()=>{if (!p[0].length) p[0]=po[0].split("");if (!p[1].length) p[1]=po[1].split("");};let f0=()=>{let m=Math.floor(Math.random()*p[0].length),n=Math.floor(Math.random()*r.length);r=r.slice(0,n)+p[0][m]+r.slice(n);p[0].splice(m,1);};let f1=()=>{let m=Math.floor(Math.random()*p[1].length),n=Math.floor(Math.random()*r.length);r=r.slice(0,n)+p[1][m]+r.slice(n);p[1].splice(m,1);};if (po[0]&&po[1]) {var a=Math.ceil(nb.value*0.7);var b=Math.floor(nb.value*0.3);var d=0;supply();while (a) {f0();a--;supply();}while (b) {d+=Math.floor(Math.random()*1000000);var m=Math.floor(Math.random()*p[1].length),n=d%r.length;r=r.slice(0,n)+p[1][m]+r.slice(n);p[1].splice(m,1);b--;supply();}}else if (po[0]) {var a=nb.value;supply();while (a) {f0();a--;supply();}}else if (po[1]) {var b=nb.value;supply();while (b) {f1();b--;supply();}}return r;};var t=f();while (t) {if (ab.test(t)) {ap(pw,cs("alphabet",t.match(ab)[1]));t=t.replace(ab,"");}else if (num.test(t)) {ap(pw,cs("number",t.match(num)[1]));t=t.replace(num,"");}else {ap(pw,cs("symbol",t.match(sym)[1]));t=t.replace(sym,"");}}};if (avail) f();else pending=f;};let base=cd("base");apd(base,null,"header","Length");let lt=apd(base,"letters");let r=ap(apd(lt),ce("input"));r.type="range";r.min=1;r.max=100;r.step=1;r.value=60;r.disabled=false;ael(r,"change",()=>{nb.value=r.value;});let nb=ap(ap(lt,sa(ce("form"),"onsubmit","return false;")),ce("input"));nb.type="number";sa(nb,"pattern","[0-9]*");nb.max=10000;nb.min=0;nb.value=60;ael(nb,"change",()=>{if (nb.value>100) {r.value=100;r.disabled=true;}else {r.value=nb.value;r.disabled=false;}});apd(base,null,"header","Character");let ch=apd(base,"chars");let char=(label,values)=>{var state=2;let stchanged=()=>{c.className=`chars ${(["off","mixed","on"])[state]}`;sgn.textContent=(["×","・","○"])[state];s.state=state;};let c=apd(ch,null);let sgn=apd(c,null,"sign");apd(c,null,"desc",label);let s=ce("select");s.multiple=true;values.split("").forEach(e=>{let o=ap(s,ce("option"));o.selected=true;o.text=e;});ael(apd(c,null,"option","⚙️"),"click",e=>{s.focus();e.cancelBubble=true;});ael(s,"change",()=>{var a=o=1;for (var n=0;n<s.length;n++) {let b=s[n].selected;a&=b;o|=b;}if (a==o) state=a*2;else state=1;stchanged();changeChars();});ael(c,"click",()=>{state=(state<2)*2;for (var n=0;n<s.length;n++) s[n].selected=state>0;stchanged();changeChars();});ap(c,s);stchanged();return s;};let upc=char("A-Z","ABCDEFGHIJKLMNOPQRSTUVWXYZ");let lwc=char("a-z","abcdefghijklmnopqrstuvwxyz");let num=char("0-9","0123456789");let sym=char("Symbol","./%#,:&|¥!?-;'\"$+*^`~()<>[]{}");let buttons=apd(base,"buttons");let btn=(l,a)=>{let b=apd(buttons,null,null,l);var t=false;ael(b,touch?"touchstart":"mousedown",()=>{t=true;sa(b,"class","pressed");});let f=()=>{t=false;ra(b,"class");};if (touch) {ael(b,"touchmove",f);ael(b,"touchcancel",f);}else ael(b,"mouseout",f);ael(b,touch?"touchend":"mouseup",()=>{let w=t;t=false;b.removeAttribute("class");if (w) a();});return b;};btn("Generate",generate);var to=null;let cpb=btn("Copy",()=>{let s=document.getSelection();s.selectAllChildren(pw);document.execCommand("copy");setTimeout(()=>{if (s.empty) s.empty();if (s.removeAllRanges) s.removeAllRanges();},0);if (to) clearTimeout(to);cpb.textContent="Copied";to=setTimeout(()=>{cpb.textContent="Copy";to=null;},3000);});let pw=apd(base,"password");changeChars();ael(window,"load",()=>ap(document.body,base));rm(document.getElementsByTagName("script")[0]);})();